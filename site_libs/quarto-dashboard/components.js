"use strict";/*! bslib 0.5.1.9000 | (c) 2012-2023 RStudio, PBC. | License: MIT + file LICENSE */(()=>{var f=window.Shiny?Shiny.InputBinding:class{};function p(e,t){window.Shiny&&Shiny.inputBindings.register(new e,"bslib."+t)}function b(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==void 0}function S(e){const t=["a[href]","area[href]","button","details summary","input","iframe","select","textarea",'[contentEditable=""]','[contentEditable="true"]','[contentEditable="TRUE"]',"[tabindex]"],i=[':not([tabindex="-1"])',":not([disabled])"],s=t.map(l=>l+i.join("")),n=e.querySelectorAll(s.join(", "));return Array.from(n)}var m=class extends f{find(e){return $(e).find(".accordion.bslib-accordion-input")}getValue(e){const i=this._getItemInfo(e).filter(s=>s.isOpen()).map(s=>s.value);return i.length===0?null:i}subscribe(e,t){$(e).on("shown.bs.collapse.accordionInputBinding hidden.bs.collapse.accordionInputBinding",function(i){t(!0)})}unsubscribe(e){$(e).off(".accordionInputBinding")}receiveMessage(e,t){const i=t.method;if(i==="set")this._setItems(e,t);else if(i==="open")this._openItems(e,t);else if(i==="close")this._closeItems(e,t);else if(i==="remove")this._removeItem(e,t);else if(i==="insert")this._insertItem(e,t);else if(i==="update")this._updateItem(e,t);else throw new Error(`Method not yet implemented: ${i}`)}_setItems(e,t){const i=this._getItemInfo(e),s=this._getValues(e,i,t.values);i.forEach(n=>{s.indexOf(n.value)>-1?n.show():n.hide()})}_openItems(e,t){const i=this._getItemInfo(e),s=this._getValues(e,i,t.values);i.forEach(n=>{s.indexOf(n.value)>-1&&n.show()})}_closeItems(e,t){const i=this._getItemInfo(e),s=this._getValues(e,i,t.values);i.forEach(n=>{s.indexOf(n.value)>-1&&n.hide()})}_insertItem(e,t){let i=this._findItem(e,t.target);i||(i=t.position==="before"?e.firstElementChild:e.lastElementChild);const s=t.panel;if(i?Shiny.renderContent(i,s,t.position==="before"?"beforeBegin":"afterEnd"):Shiny.renderContent(e,s),this._isAutoClosing(e)){const n=$(s.html).attr("data-value");$(e).find(`[data-value="${n}"] .accordion-collapse`).attr("data-bs-parent","#"+e.id)}}_removeItem(e,t){const i=this._getItemInfo(e).filter(n=>t.target.indexOf(n.value)>-1),s=Shiny==null?void 0:Shiny.unbindAll;i.forEach(n=>{s&&s(n.item),n.item.remove()})}_updateItem(e,t){const i=this._findItem(e,t.target);if(!i)throw new Error(`Unable to find an accordion_panel() with a value of ${t.target}`);if(b(t,"value")&&(i.dataset.value=t.value),b(t,"body")){const n=i.querySelector(".accordion-body");Shiny.renderContent(n,t.body)}const s=i.querySelector(".accordion-header");if(b(t,"title")){const n=s.querySelector(".accordion-title");Shiny.renderContent(n,t.title)}if(b(t,"icon")){const n=s.querySelector(".accordion-button > .accordion-icon");Shiny.renderContent(n,t.icon)}}_getItemInfo(e){return Array.from(e.querySelectorAll(":scope > .accordion-item")).map(i=>this._getSingleItemInfo(i))}_getSingleItemInfo(e){const t=e.querySelector(".accordion-collapse"),i=()=>$(t).hasClass("show");return{item:e,value:e.dataset.value,isOpen:i,show:()=>{i()||$(t).collapse("show")},hide:()=>{i()&&$(t).collapse("hide")}}}_getValues(e,t,i){let s=i!==!0?i:t.map(l=>l.value);return this._isAutoClosing(e)&&(s=s.slice(s.length-1,s.length)),s}_findItem(e,t){return e.querySelector(`[data-value="${t}"]`)}_isAutoClosing(e){return e.classList.contains("autoclose")}};p(m,"accordion");var g=class{constructor(){this.resizeObserverEntries=[],this.resizeObserver=new ResizeObserver(e=>{const t=new Event("resize");if(window.dispatchEvent(t),!window.Shiny)return;const i=[];for(const s of e)s.target instanceof HTMLElement&&s.target.querySelector(".shiny-bound-output")&&s.target.querySelectorAll(".shiny-bound-output").forEach(n=>{if(i.includes(n))return;const{binding:l,onResize:h}=$(n).data("shinyOutputBinding");if(!l||!l.resize)return;const o=n.shinyResizeObserver;if(o&&o!==this||(o||(n.shinyResizeObserver=this),h(n),i.push(n),!n.classList.contains("shiny-plot-output")))return;const d=n.querySelector('img:not([width="100%"])');d&&d.setAttribute("width","100%")})})}observe(e){this.resizeObserver.observe(e),this.resizeObserverEntries.push(e)}unobserve(e){const t=this.resizeObserverEntries.indexOf(e);t<0||(this.resizeObserver.unobserve(e),this.resizeObserverEntries.splice(t,1))}flush(){this.resizeObserverEntries.forEach(e=>{document.body.contains(e)||this.unobserve(e)})}},r=class{constructor(e){var t;e.removeAttribute(r.attr.ATTR_INIT),(t=e.querySelector(`script[${r.attr.ATTR_INIT}]`))==null||t.remove(),this.card=e,r.instanceMap.set(e,this),r.shinyResizeObserver.observe(this.card),this._addEventListeners(),this.overlay=this._createOverlay(),this._exitFullScreenOnEscape=this._exitFullScreenOnEscape.bind(this),this._trapFocusExit=this._trapFocusExit.bind(this)}enterFullScreen(e){var t;e&&e.preventDefault(),document.addEventListener("keydown",this._exitFullScreenOnEscape,!1),document.addEventListener("keydown",this._trapFocusExit,!0),this.card.setAttribute(r.attr.ATTR_FULL_SCREEN,"true"),document.body.classList.add(r.attr.CLASS_HAS_FULL_SCREEN),this.card.insertAdjacentElement("beforebegin",this.overlay.container),(!this.card.contains(document.activeElement)||(t=document.activeElement)!=null&&t.classList.contains(r.attr.CLASS_FULL_SCREEN_ENTER))&&(this.card.setAttribute("tabindex","-1"),this.card.focus())}exitFullScreen(){document.removeEventListener("keydown",this._exitFullScreenOnEscape,!1),document.removeEventListener("keydown",this._trapFocusExit,!0),this.overlay.container.remove(),this.card.setAttribute(r.attr.ATTR_FULL_SCREEN,"false"),this.card.removeAttribute("tabindex"),document.body.classList.remove(r.attr.CLASS_HAS_FULL_SCREEN)}_addEventListeners(){const e=this.card.querySelector(`:scope > * > .${r.attr.CLASS_FULL_SCREEN_ENTER}`);e&&e.addEventListener("click",t=>this.enterFullScreen(t))}_exitFullScreenOnEscape(e){if(!(e.target instanceof HTMLElement))return;const t=["select[open]","input[aria-expanded='true']"];e.target.matches(t.join(", "))||e.key==="Escape"&&this.exitFullScreen()}_trapFocusExit(e){if(!(e instanceof KeyboardEvent)||e.key!=="Tab")return;const t=e.target===this.card,i=e.target===this.overlay.anchor,s=this.card.contains(e.target),n=()=>{e.preventDefault(),e.stopImmediatePropagation()};if(!(s||t||i)){n(),this.card.focus();return}const l=S(this.card).filter(y=>!y.classList.contains(r.attr.CLASS_FULL_SCREEN_ENTER));if(!(l.length>0)){n(),this.overlay.anchor.focus();return}if(t)return;const o=l[l.length-1],d=e.target===o;if(i&&e.shiftKey){n(),o.focus();return}if(d&&!e.shiftKey){n(),this.overlay.anchor.focus();return}}_createOverlay(){const e=document.createElement("div");e.id=r.attr.ID_FULL_SCREEN_OVERLAY,e.onclick=this.exitFullScreen.bind(this);const t=this._createOverlayCloseAnchor();return e.appendChild(t),{container:e,anchor:t}}_createOverlayCloseAnchor(){const e=document.createElement("a");return e.classList.add(r.attr.CLASS_FULL_SCREEN_EXIT),e.tabIndex=0,e.onclick=()=>this.exitFullScreen(),e.onkeydown=t=>{(t.key==="Enter"||t.key===" ")&&this.exitFullScreen()},e.innerHTML=this._overlayCloseHtml(),e}_overlayCloseHtml(){return"Close <svg width='20' height='20' fill='currentColor' class='bi bi-x-lg' viewBox='0 0 16 16'><path d='M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z'/></svg>"}static getInstance(e){return r.instanceMap.get(e)}static initializeAllCards(e=!0){if(document.readyState==="loading"){r.onReadyScheduled||(r.onReadyScheduled=!0,document.addEventListener("DOMContentLoaded",()=>{r.initializeAllCards(!1)}));return}e&&r.shinyResizeObserver.flush();const t=`.${r.attr.CLASS_CARD}[${r.attr.ATTR_INIT}]`;if(!document.querySelector(t))return;document.querySelectorAll(t).forEach(s=>new r(s))}},u=r;u.attr={ATTR_INIT:"data-bslib-card-init",CLASS_CARD:"bslib-card",ATTR_FULL_SCREEN:"data-full-screen",CLASS_HAS_FULL_SCREEN:"bslib-has-full-screen",CLASS_FULL_SCREEN_ENTER:"bslib-full-screen-enter",CLASS_FULL_SCREEN_EXIT:"bslib-full-screen-exit",ID_FULL_SCREEN_OVERLAY:"bslib-full-screen-overlay"},u.shinyResizeObserver=new g,u.instanceMap=new WeakMap,u.onReadyScheduled=!1,window.bslib=window.bslib||{},window.bslib.Card=u;var a=class{constructor(e){var t;a.instanceMap.set(e,this),this.layout={container:e,main:e.querySelector(":scope > .main"),sidebar:e.querySelector(":scope > .sidebar"),toggle:e.querySelector(":scope > .collapse-toggle")};const i=this.layout.sidebar.querySelector(":scope > .sidebar-content > .accordion");i&&((t=i?.parentElement)==null||t.classList.add("has-accordion"),i.classList.add("accordion-flush")),this.layout.toggle&&(this._initEventListeners(),this._initSidebarCounters(),this._initDesktop()),a.shinyResizeObserver.observe(this.layout.main),e.removeAttribute("data-bslib-sidebar-init");const s=e.querySelector(":scope > script[data-bslib-sidebar-init]");s&&e.removeChild(s)}get isClosed(){return this.layout.container.classList.contains(a.classes.COLLAPSE)}static getInstance(e){return a.instanceMap.get(e)}static initCollapsibleAll(e=!0){if(document.readyState==="loading"){a.onReadyScheduled||(a.onReadyScheduled=!0,document.addEventListener("DOMContentLoaded",()=>{a.initCollapsibleAll(!1)}));return}const t=`.${a.classes.LAYOUT}[data-bslib-sidebar-init]`;if(!document.querySelector(t))return;e&&a.shinyResizeObserver.flush(),document.querySelectorAll(t).forEach(s=>new a(s))}_initEventListeners(){var e;const{toggle:t}=this.layout;t.addEventListener("click",i=>{i.preventDefault(),this.toggle("toggle")}),(e=t.querySelector(".collapse-icon"))==null||e.addEventListener("transitionend",()=>this._finalizeState())}_initSidebarCounters(){const{container:e}=this.layout,t=`.${a.classes.LAYOUT}> .main > .${a.classes.LAYOUT}:not([data-bslib-sidebar-open="always"])`;if(!(e.querySelector(t)===null))return;function s(o){return o=o?o.parentElement:null,o&&o.classList.contains("main")&&(o=o.parentElement),o&&o.classList.contains(a.classes.LAYOUT)?o:null}const n=[e];let l=s(e);for(;l;)n.unshift(l),l=s(l);const h={left:0,right:0};n.forEach(function(o,d){o.style.setProperty("--bslib-sidebar-counter",d.toString());const C=o.classList.contains("sidebar-right")?h.right++:h.left++;o.style.setProperty("--bslib-sidebar-overlap-counter",C.toString())})}_initDesktop(){var e;const{container:t}=this.layout;if(((e=t.dataset.bslibSidebarOpen)==null?void 0:e.trim())!=="desktop")return;window.getComputedStyle(t).getPropertyValue("--bslib-sidebar-js-init-collapsed").trim()==="true"&&this.toggle("close")}toggle(e){typeof e>"u"&&(e="toggle");const{container:t,sidebar:i}=this.layout,s=this.isClosed;if(["open","close","toggle"].indexOf(e)===-1)throw new Error(`Unknown method ${e}`);e==="toggle"&&(e=s?"open":"close"),!(s&&e==="close"||!s&&e==="open")&&(e==="open"&&(i.hidden=!1),t.classList.add(a.classes.TRANSITIONING),t.classList.toggle(a.classes.COLLAPSE))}_finalizeState(){const{container:e,sidebar:t,toggle:i}=this.layout;e.classList.remove(a.classes.TRANSITIONING),t.hidden=this.isClosed,i.setAttribute("aria-expanded",this.isClosed?"false":"true");const s=new CustomEvent("bslib.sidebar",{bubbles:!0,detail:{open:!this.isClosed}});t.dispatchEvent(s),$(t).trigger("toggleCollapse.sidebarInputBinding"),$(t).trigger(this.isClosed?"hidden":"shown")}},c=a;c.shinyResizeObserver=new g,c.classes={LAYOUT:"bslib-sidebar-layout",COLLAPSE:"sidebar-collapsed",TRANSITIONING:"transitioning"},c.onReadyScheduled=!1,c.instanceMap=new WeakMap;var E=class extends f{find(e){return $(e).find(`.${c.classes.LAYOUT} > .bslib-sidebar-input`)}getValue(e){const t=c.getInstance(e.parentElement);return t?!t.isClosed:!1}setValue(e,t){const i=t?"open":"close";this.receiveMessage(e,{method:i})}subscribe(e,t){$(e).on("toggleCollapse.sidebarInputBinding",function(i){t(!0)})}unsubscribe(e){$(e).off(".sidebarInputBinding")}receiveMessage(e,t){const i=c.getInstance(e.parentElement);i&&i.toggle(t.method)}};p(E,"sidebar"),window.bslib=window.bslib||{},window.bslib.Sidebar=c;function _(e){if(window.Shiny)for(const[t,i]of Object.entries(e))Shiny.addCustomMessageHandler(t,i)}var L={"bslib.toggle-input-binary":e=>{const t=document.getElementById(e.id);t||console.warn("[bslib.toggle-input-binary] No element found",e);const i=$(t).data("shiny-input-binding");if(!(i instanceof f)){console.warn("[bslib.toggle-input-binary] No input binding found",e);return}let s=e.value;typeof s>"u"&&(s=!i.getValue(t)),i.receiveMessage(t,{value:s})}};window.Shiny&&_(L);function v(){const e=document.createElement("div");e.innerHTML=`
  <svg aria-hidden="true" focusable="false" style="width:0;height:0;position:absolute;">
    <!-- ref: https://fvsch.com/svg-gradient-fill -->
    <linearGradient id='bslib---icon-gradient' x1='0' y1='0' x2='1.6' y2='2.4'>
      <stop offset='0%' stop-color='var(--bslib-icon-gradient-0, #007bc2)' />
      <stop offset='14.29%' stop-color='var(--bslib-icon-gradient-1, #0770c9)' />
      <stop offset='28.57%' stop-color='var(--bslib-icon-gradient-2, #0d63da)' />
      <stop offset='42.86%' stop-color='var(--bslib-icon-gradient-3, #2b4af9)' />
      <stop offset='57.14%' stop-color='var(--bslib-icon-gradient-4, #5e29f7)' />
      <stop offset='71.43%' stop-color='var(--bslib-icon-gradient-5, #7217d7)' />
      <stop offset='100%' stop-color='var(--bslib-icon-gradient-6, #74149c)' />
    </linearGradient>
  </svg>`,document.body.appendChild(e.children[0])}document.readyState==="complete"?v():document.addEventListener("DOMContentLoaded",v)})();
